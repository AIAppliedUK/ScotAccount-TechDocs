<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScotAccount Modular Structure | ScotAccount Technical Documentation</title>
  <meta name="description" content="Understanding the modular structure and service organization of ScotAccount components">
  <link rel="canonical" href="https://scotaccount.github.io/sg-identity-techdocs/scotaccount-modular-structure/">
  
  <!-- Scottish Government favicons -->
  <link rel="icon" type="image/x-icon" href="/sg-identity-techdocs/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/sg-identity-techdocs/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/sg-identity-techdocs/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/sg-identity-techdocs/favicon-16x16.png">
  <link rel="mask-icon" href="/sg-identity-techdocs/safari-pinned-tab.svg" color="#0065bd">

  <!-- Styles -->
  <link rel="stylesheet" href="/sg-identity-techdocs/css/main.css">
  
  <!-- Open Graph -->
  <meta property="og:title" content="ScotAccount Modular Structure">
  <meta property="og:description" content="Understanding the modular structure and service organization of ScotAccount components">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/scotaccount-modular-structure/">
  <meta property="og:image" content="apple-touch-icon.png">
  
  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "ScotAccount Modular Structure",
    "description": "Understanding the modular structure and service organization of ScotAccount components",
    "author": {
      "@type": "Organization",
      "name": "Scottish Government",
      "url": "https://www.gov.scot"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Scottish Government",
      "url": "https://www.gov.scot"
    }
  }
  </script>
</head>
<body>
  <!-- Cookie Banner (Scottish Government Style) -->
  <div class="cookie-banner" id="cookie-banner" role="region" aria-labelledby="cookie-banner-heading">
    <div class="cookie-banner__container">
      <div class="cookie-banner__content">
        <h2 id="cookie-banner-heading" class="cookie-banner__heading">Information</h2>
        <p class="cookie-banner__text">We use <a href="#cookies" class="cookie-banner__link">cookies</a> to collect anonymous data to help us improve your site browsing experience.</p>
        <p class="cookie-banner__text">Click 'Accept all cookies' to agree to all cookies that collect anonymous data. To only allow the cookies that make the site work, click 'Use essential cookies only.' Visit 'Set cookie preferences' to control specific cookies.</p>
      </div>
      <div class="cookie-banner__actions">
        <button type="button" class="cookie-banner__button cookie-banner__button--primary" onclick="acceptAllCookies()">Accept all cookies</button>
        <button type="button" class="cookie-banner__button cookie-banner__button--secondary" onclick="useEssentialCookies()">Use essential cookies only</button>
        <button type="button" class="cookie-banner__button cookie-banner__button--link" onclick="setCookiePreferences()">Set cookie preferences</button>
      </div>
    </div>
  </div>

  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Scottish Government Identity Header (blue) -->
  <header class="sg-header" role="banner">
    <div class="sg-header__wrapper">
      <div class="sg-header__branding">
        <a href="/" class="sg-header__logo">
          <img src="/sg-identity-techdocs/assets/scotgovlogo.svg" alt="Scottish Government">
        </a>
      </div>
      <div class="sg-header__search">
        <form class="sg-header__search-form" role="search" action="/sg-identity-techdocs/search" method="get">
          <label for="search-input" class="sg-header__search-label">Search</label>
          <input type="search" id="search-input" name="q" class="sg-header__search-input" placeholder="Search">
          <button type="submit" class="sg-header__search-button">
            <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
              <path fill="currentColor" d="M15.504 13.616l-3.79-3.223c-0.392-0.353-0.811-0.514-1.149-0.499 0.895-1.048 1.435-2.407 1.435-3.893 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.486 0 2.845-0.54 3.893-1.435-0.016 0.338 0.146 0.757 0.499 1.149l3.223 3.79c0.552 0.613 1.453 0.665 2.003 0.115s0.498-1.452-0.115-2.003zM6 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"/>
            </svg>
            <span class="sg-visually-hidden">Search</span>
          </button>
        </form>
      </div>
    </div>
  </header>
  <!-- Site Navigation Header (white) -->
  <nav class="site-nav" role="navigation" aria-label="Main navigation">
    <div class="site-nav__wrapper">
      <ul class="site-nav__list" id="nav-menu">
        
          <li class="site-nav__item">
            <a href="/sg-identity-techdocs/" class="site-nav__link">Home</a>
          </li>
        
          <li class="site-nav__item">
            <a href="getting-started/" class="site-nav__link">Getting Started</a>
          </li>
        
          <li class="site-nav__item">
            <a href="architecture/" class="site-nav__link">Architecture</a>
          </li>
        
          <li class="site-nav__item">
            <a href="scotaccount-complete-guide/" class="site-nav__link">Complete Guide</a>
          </li>
        
          <li class="site-nav__item">
            <a href="scotaccount-token-validation-module/" class="site-nav__link">Token Validation</a>
          </li>
        
      </ul>
    </div>
  </nav>

  <!-- Main layout container -->
  <div class="container">
    <!-- Sidebar with page-specific navigation -->
    
    <aside class="sidebar" role="complementary" aria-label="Page navigation">
      <h2 class="sidebar__title">On this page</h2>
      <nav class="sidebar__nav" aria-label="Page contents">
        <ul class="sidebar__nav">
          <!-- Table of contents will be injected here via JavaScript -->
          <li class="sidebar__nav-item">
            <a href="#" class="sidebar__nav-link" id="toc-placeholder">
              Contents loading...
            </a>
          </li>
        </ul>
      </nav>
      
      
      <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid var(--sg-border-grey);">
      <h3 class="sidebar__title">All pages</h3>
      <ul class="sidebar__nav">
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/architecture/" 
              class="sidebar__nav-link">
              ScotAccount Architecture Overview
            </a>
          </li>
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/getting-started/" 
              class="sidebar__nav-link">
              Getting Started with ScotAccount
            </a>
          </li>
          
        
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/integration-examples/" 
              class="sidebar__nav-link">
              Integration Examples and Best Practices
            </a>
          </li>
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/scotaccount-complete-guide/" 
              class="sidebar__nav-link">
              Complete Implementation Guide
            </a>
          </li>
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/scotaccount-modular-structure/" 
              class="sidebar__nav-link">
              ScotAccount Modular Structure
            </a>
          </li>
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/scotaccount-token-validation-module/" 
              class="sidebar__nav-link">
              Token Validation Module
            </a>
          </li>
          
        
          
          <li class="sidebar__nav-item">
            <a href="/sg-identity-techdocs/search/" 
              class="sidebar__nav-link">
              Search results
            </a>
          </li>
          
        
      </ul>
      
    </aside>
    

    <!-- Main content -->
    <main class="main" id="main-content" role="main" tabindex="-1">
      
        <h1>ScotAccount Modular Structure</h1>
      
      
      
        <p class="lead">Understanding the modular structure and service organization of ScotAccount components</p>
      

      <!-- Page content -->
      <p>ScotAccount is built using a modular architecture that separates concerns and enables flexible integration patterns. This page explains the service organization and how different modules work together.</p>
<h2 id="service-modules-overview" tabindex="-1"><a class="header-anchor" href="#service-modules-overview"><span>Service Modules Overview</span></a></h2>
<p>ScotAccount consists of several interconnected modules, each with specific responsibilities:</p>
<h3 id="core-authentication-module" tabindex="-1"><a class="header-anchor" href="#core-authentication-module"><span>Core Authentication Module</span></a></h3>
<ul>
<li><strong>Primary responsibility</strong>: User authentication and session management</li>
<li><strong>Key features</strong>: OpenID Connect authentication, JWT token issuance, session handling</li>
<li><strong>Integration point</strong>: All relying parties connect to this module for basic authentication</li>
</ul>
<h3 id="identity-verification-module-verifyyouridentity" tabindex="-1"><a class="header-anchor" href="#identity-verification-module-verifyyouridentity"><span>Identity Verification Module (VerifyYourIdentity)</span></a></h3>
<ul>
<li><strong>Primary responsibility</strong>: GPG45 Medium assurance identity verification</li>
<li><strong>Key features</strong>: Document scanning, biometric verification, PEP/sanctions checks</li>
<li><strong>Integration point</strong>: Invoked when verified identity attributes are required</li>
</ul>
<h3 id="attribute-storage-module-mysafe" tabindex="-1"><a class="header-anchor" href="#attribute-storage-module-mysafe"><span>Attribute Storage Module (mySafe)</span></a></h3>
<ul>
<li><strong>Primary responsibility</strong>: Secure storage and management of verified user data</li>
<li><strong>Key features</strong>: Encrypted data storage, consent management, attribute retrieval</li>
<li><strong>Integration point</strong>: Provides verified attributes to relying parties</li>
</ul>
<h3 id="consent-management-module" tabindex="-1"><a class="header-anchor" href="#consent-management-module"><span>Consent Management Module</span></a></h3>
<ul>
<li><strong>Primary responsibility</strong>: User consent tracking and management</li>
<li><strong>Key features</strong>: Granular consent controls, audit trails, user self-service</li>
<li><strong>Integration point</strong>: Embedded in authentication flows requiring data sharing</li>
</ul>
<h2 id="module-integration-patterns" tabindex="-1"><a class="header-anchor" href="#module-integration-patterns"><span>Module Integration Patterns</span></a></h2>
<h3 id="basic-authentication-pattern" tabindex="-1"><a class="header-anchor" href="#basic-authentication-pattern"><span>Basic Authentication Pattern</span></a></h3>
<pre><code>Relying Party → Authentication Module → User Session
</code></pre>
<h3 id="verified-attributes-pattern" tabindex="-1"><a class="header-anchor" href="#verified-attributes-pattern"><span>Verified Attributes Pattern</span></a></h3>
<pre><code>Relying Party → Authentication Module → mySafe → Verified Attributes
</code></pre>
<h3 id="identity-verification-pattern" tabindex="-1"><a class="header-anchor" href="#identity-verification-pattern"><span>Identity Verification Pattern</span></a></h3>
<pre><code>User → VerifyYourIdentity → External Verification → mySafe → Attributes
</code></pre>
<h2 id="module-responsibilities" tabindex="-1"><a class="header-anchor" href="#module-responsibilities"><span>Module Responsibilities</span></a></h2>
<h3 id="what-each-module-handles" tabindex="-1"><a class="header-anchor" href="#what-each-module-handles"><span>What Each Module Handles</span></a></h3>
<p><strong>Authentication Module</strong>:</p>
<ul>
<li>User registration and login</li>
<li>OpenID Connect protocol implementation</li>
<li>JWT token generation and validation</li>
<li>Session lifecycle management</li>
<li>Basic user profile data</li>
</ul>
<p><strong>Identity Verification Module</strong>:</p>
<ul>
<li>Document capture and verification</li>
<li>Biometric identity matching</li>
<li>External service integration (Experian, etc.)</li>
<li>Verification workflow management</li>
<li>Cross-device verification support</li>
</ul>
<p><strong>Attribute Storage Module</strong>:</p>
<ul>
<li>Encrypted storage of verified data</li>
<li>Consent tracking and enforcement</li>
<li>Data retrieval for authorized requests</li>
<li>Audit logging and compliance</li>
<li>Data retention and deletion</li>
</ul>
<p><strong>Consent Management Module</strong>:</p>
<ul>
<li>User consent collection</li>
<li>Granular permission management</li>
<li>Consent withdrawal handling</li>
<li>Audit trail maintenance</li>
<li>User preference management</li>
</ul>
<h2 id="integration-considerations" tabindex="-1"><a class="header-anchor" href="#integration-considerations"><span>Integration Considerations</span></a></h2>
<h3 id="modular-integration-benefits" tabindex="-1"><a class="header-anchor" href="#modular-integration-benefits"><span>Modular Integration Benefits</span></a></h3>
<p><strong>Flexible Implementation</strong>:</p>
<ul>
<li>Integrate only the modules you need</li>
<li>Start with basic authentication, add verification later</li>
<li>Independent module updates and maintenance</li>
</ul>
<p><strong>Scalable Architecture</strong>:</p>
<ul>
<li>Modules can scale independently</li>
<li>Load balancing per module</li>
<li>Fault isolation between modules</li>
</ul>
<p><strong>Security by Design</strong>:</p>
<ul>
<li>Module-level security boundaries</li>
<li>Least privilege access patterns</li>
<li>Independent security auditing</li>
</ul>
<h3 id="module-dependencies" tabindex="-1"><a class="header-anchor" href="#module-dependencies"><span>Module Dependencies</span></a></h3>
<p><strong>Core Dependencies</strong>:</p>
<ul>
<li>Authentication Module: Required for all integrations</li>
<li>Consent Management: Required when requesting verified attributes</li>
<li>Identity Verification: Optional, based on service requirements</li>
<li>Attribute Storage: Required for verified attribute access</li>
</ul>
<p><strong>Optional Dependencies</strong>:</p>
<ul>
<li>Address verification services</li>
<li>Email verification services</li>
<li>Additional external verification providers</li>
</ul>
<h2 id="development-approach" tabindex="-1"><a class="header-anchor" href="#development-approach"><span>Development Approach</span></a></h2>
<h3 id="modular-development-strategy" tabindex="-1"><a class="header-anchor" href="#modular-development-strategy"><span>Modular Development Strategy</span></a></h3>
<ol>
<li>
<p><strong>Start with Authentication Module</strong></p>
<ul>
<li>Implement basic OpenID Connect integration</li>
<li>Establish user session management</li>
<li>Test authentication flows</li>
</ul>
</li>
<li>
<p><strong>Add Consent Management</strong></p>
<ul>
<li>Implement consent collection</li>
<li>Add granular permission controls</li>
<li>Test consent workflows</li>
</ul>
</li>
<li>
<p><strong>Integrate Verification Module</strong></p>
<ul>
<li>Add identity verification flows</li>
<li>Implement cross-device support</li>
<li>Test verification processes</li>
</ul>
</li>
<li>
<p><strong>Enable Attribute Storage</strong></p>
<ul>
<li>Access verified user data</li>
<li>Implement secure data handling</li>
<li>Test attribute retrieval</li>
</ul>
</li>
</ol>
<h3 id="module-testing-approach" tabindex="-1"><a class="header-anchor" href="#module-testing-approach"><span>Module Testing Approach</span></a></h3>
<p><strong>Unit Testing</strong>:</p>
<ul>
<li>Test each module independently</li>
<li>Mock external module dependencies</li>
<li>Validate module interfaces</li>
</ul>
<p><strong>Integration Testing</strong>:</p>
<ul>
<li>Test module communication</li>
<li>Validate data flow between modules</li>
<li>Test error handling across modules</li>
</ul>
<p><strong>End-to-End Testing</strong>:</p>
<ul>
<li>Test complete user journeys</li>
<li>Validate cross-module functionality</li>
<li>Test module fault tolerance</li>
</ul>
<h2 id="next-steps" tabindex="-1"><a class="header-anchor" href="#next-steps"><span>Next Steps</span></a></h2>
<div class="callout callout--info">
<strong>Need implementation guidance?</strong> Start with the <a href="/sg-identity-techdocs/getting-started/">Getting Started guide</a> to implement the authentication module first.
</div>
<div class="callout callout--success">
<strong>Planning your architecture?</strong> Review the <a href="/sg-identity-techdocs/architecture/">Architecture Overview</a> to understand how modules fit together.
</div>
<div class="callout callout--warning">
<strong>Ready for detailed implementation?</strong> See the <a href="/sg-identity-techdocs/scotaccount-complete-guide/">Complete Implementation Guide</a> for comprehensive technical details.
</div>


      <!-- Last updated -->
      
      <footer class="content-footer">
        <p><small>Last updated: 14 August 2025</small></p>
      </footer>
      
    </main>
  </div>

  <!-- Site footer (Scottish Government Style) -->
  <footer class="sg-footer" role="contentinfo">
    <div class="sg-footer__container">
      <div class="sg-footer__content">
        <div class="sg-footer__section">
          <h3 class="sg-footer__heading">ScotAccount</h3>
            <ul class="sg-footer__links">
            <li><a href="/sg-identity-techdocs/" class="sg-footer__link">Documentation home</a></li>
            <li><a href="/sg-identity-techdocs/getting-started/" class="sg-footer__link">Getting started</a></li>
            <li><a href="/sg-identity-techdocs/scotaccount-complete-guide/" class="sg-footer__link">Complete guide</a></li>
            </ul>
        </div>
        
        <div class="sg-footer__section">
          <h3 class="sg-footer__heading">Scottish Government</h3>
          <ul class="sg-footer__links">
            <li><a href="https://www.gov.scot" target="_blank" rel="noopener" class="sg-footer__link">gov.scot</a></li>
            <li><a href="https://www.gov.scot/about/how-government-is-run/directorates/digital-directorate/" target="_blank" rel="noopener" class="sg-footer__link">Digital Directorate</a></li>
            <li><a href="https://www.gov.scot/publications/" target="_blank" rel="noopener" class="sg-footer__link">Publications</a></li>
          </ul>
        </div>
        
        <div class="sg-footer__section">
          <h3 class="sg-footer__heading">Help and support</h3>
          <ul class="sg-footer__links">
            <li><a href="https://www.gov.scot/about/contact-information/" target="_blank" rel="noopener" class="sg-footer__link">Contact us</a></li>
            <li><a href="https://www.gov.scot/accessibility/" target="_blank" rel="noopener" class="sg-footer__link">Accessibility</a></li>
            <li><a href="https://www.gov.scot/privacy/" target="_blank" rel="noopener" class="sg-footer__link">Privacy</a></li>
            <li><a href="https://www.gov.scot/cookies/" target="_blank" rel="noopener" class="sg-footer__link">Cookies</a></li>
          </ul>
        </div>
      </div>
      
      <div class="sg-footer__legal">
        <p class="sg-footer__copyright">&copy; Crown Copyright. All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" target="_blank" rel="noopener" class="sg-footer__link">Open Government Licence v3.0</a>, except where otherwise stated.</p>
        <p class="sg-footer__site">
          <a href="https://gov.scot" class="sg-footer__link">gov.scot</a>
        </p>
      </div>
    </div>
  </footer>

  <!-- JavaScript for table of contents generation -->
  <script>
    // Generate table of contents for better scannable structure
    document.addEventListener('DOMContentLoaded', function() {
      const headings = document.querySelectorAll('main h2, main h3, main h4');
      const tocContainer = document.querySelector('.sidebar__nav');
      const placeholder = document.getElementById('toc-placeholder');
      
      if (headings.length > 0 && tocContainer && placeholder) {
        // Remove placeholder
        placeholder.remove();
        
        // Generate TOC
        headings.forEach(function(heading, index) {
          // Add ID to heading if it doesn't have one
          if (!heading.id) {
            heading.id = 'heading-' + index;
          }
          
          // Create TOC item
          const li = document.createElement('li');
          li.className = 'sidebar__nav-item';
          
          const a = document.createElement('a');
          a.href = '#' + heading.id;
          a.className = 'sidebar__nav-link';
          a.textContent = heading.textContent;
          
          // Add visual hierarchy for different heading levels
          if (heading.tagName === 'H3') {
            a.style.paddingLeft = '2rem';
          } else if (heading.tagName === 'H4') {
            a.style.paddingLeft = '3rem';
          }
          
          li.appendChild(a);
          tocContainer.appendChild(li);
        });
      } else if (placeholder) {
        placeholder.textContent = 'No headings found';
      }
      
      // Smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });

    // Cookie banner functionality (Scottish Government style)
    function acceptAllCookies() {
      localStorage.setItem('cookiePreference', 'all');
      hideCookieBanner();
    }

    function useEssentialCookies() {
      localStorage.setItem('cookiePreference', 'essential');
      hideCookieBanner();
    }

    function setCookiePreferences() {
      // In a real implementation, this would open a preferences modal
      localStorage.setItem('cookiePreference', 'essential');
      hideCookieBanner();
      alert('Cookie preferences saved. Only essential cookies will be used.');
    }

    function hideCookieBanner() {
      const banner = document.getElementById('cookie-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    // Check if user has already made a cookie preference
    document.addEventListener('DOMContentLoaded', function() {
      const cookiePreference = localStorage.getItem('cookiePreference');
      if (cookiePreference) {
        hideCookieBanner();
      }
    });

    // Mobile navigation toggle
    document.addEventListener('DOMContentLoaded', function() {
      const navToggle = document.querySelector('.sg-nav__toggle');
      const navMenu = document.querySelector('.sg-nav__list');
      
      if (navToggle && navMenu) {
        navToggle.addEventListener('click', function() {
          const isExpanded = navToggle.getAttribute('aria-expanded') === 'true';
          navToggle.setAttribute('aria-expanded', !isExpanded);
          navMenu.classList.toggle('sg-nav__list--open');
        });
      }
    });
  </script>

  <!-- Search functionality -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
  <script src="/sg-identity-techdocs/js/search.js"></script>
</body>
</html>
